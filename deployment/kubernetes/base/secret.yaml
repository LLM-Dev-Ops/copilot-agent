---
apiVersion: v1
kind: Secret
metadata:
  name: llm-copilot-secrets
  namespace: llm-copilot
  labels:
    app: llm-copilot-agent
type: Opaque
stringData:
  # Database Credentials (use external secret manager in production)
  DATABASE_URL: "postgresql://llm_user:CHANGE_ME@postgres-primary.llm-copilot.svc.cluster.local:5432/llm_copilot?sslmode=require"
  DATABASE_PASSWORD: "CHANGE_ME"

  # Redis Credentials
  REDIS_PASSWORD: "CHANGE_ME"
  REDIS_URL: "redis://:CHANGE_ME@redis-cluster.llm-copilot.svc.cluster.local:6379"

  # LLM API Keys
  OPENAI_API_KEY: "sk-CHANGE_ME"
  ANTHROPIC_API_KEY: "sk-ant-CHANGE_ME"

  # JWT Secret for Authentication
  JWT_SECRET: "CHANGE_ME_GENERATE_RANDOM_SECRET"
  JWT_REFRESH_SECRET: "CHANGE_ME_GENERATE_RANDOM_SECRET"

  # API Keys for Module Integration
  TEST_BENCH_API_KEY: "CHANGE_ME"
  OBSERVATORY_API_KEY: "CHANGE_ME"
  INCIDENT_MANAGER_API_KEY: "CHANGE_ME"
  ORCHESTRATOR_API_KEY: "CHANGE_ME"

  # External Service Credentials
  GITHUB_TOKEN: "ghp_CHANGE_ME"
  SLACK_WEBHOOK_URL: "https://hooks.slack.com/services/CHANGE_ME"
  PAGERDUTY_API_KEY: "CHANGE_ME"

  # TLS Certificates (if not using cert-manager)
  # tls.crt: <base64-encoded-certificate>
  # tls.key: <base64-encoded-private-key>

---
# NOTE: In production, use External Secrets Operator or sealed-secrets
# Example with External Secrets Operator:
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: llm-copilot-external-secrets
  namespace: llm-copilot
spec:
  secretStoreRef:
    name: aws-secrets-manager  # or vault, gcpsm, azure-kv
    kind: SecretStore
  target:
    name: llm-copilot-secrets
    creationPolicy: Owner
  data:
    - secretKey: DATABASE_PASSWORD
      remoteRef:
        key: llm-copilot/database/password
    - secretKey: REDIS_PASSWORD
      remoteRef:
        key: llm-copilot/redis/password
    - secretKey: OPENAI_API_KEY
      remoteRef:
        key: llm-copilot/openai/api-key
    - secretKey: ANTHROPIC_API_KEY
      remoteRef:
        key: llm-copilot/anthropic/api-key
    - secretKey: JWT_SECRET
      remoteRef:
        key: llm-copilot/jwt/secret
