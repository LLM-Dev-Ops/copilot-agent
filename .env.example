# LLM CoPilot Agent - Environment Configuration
# Copy this file to .env and update with your values

# ============================================================================
# Server Configuration
# ============================================================================
PORT=8080
GRPC_PORT=50051
METRICS_PORT=9090
ENVIRONMENT=dev
LOG_LEVEL=info
JSON_LOGS=false

# TLS Configuration (optional)
ENABLE_TLS=false
TLS_CERT_PATH=
TLS_KEY_PATH=

# Worker Configuration
WORKER_THREADS=
MAX_CONNECTIONS=10000
REQUEST_TIMEOUT=30

# ============================================================================
# Database Configuration
# ============================================================================
# PostgreSQL connection string
DATABASE_URL=postgresql://copilot:password@localhost:5432/copilot_db

# Connection pool settings
DATABASE_MAX_CONNECTIONS=10
DATABASE_MIN_CONNECTIONS=2
DATABASE_CONNECT_TIMEOUT=30
DATABASE_IDLE_TIMEOUT=600

# ============================================================================
# Cache Configuration
# ============================================================================
# Redis connection string
REDIS_URL=redis://localhost:6379/0

# Redis pool settings
REDIS_MAX_CONNECTIONS=10
REDIS_MIN_CONNECTIONS=2
REDIS_CONNECT_TIMEOUT=5
REDIS_POOL_TIMEOUT=10

# Cache TTL (in seconds)
CACHE_TTL=3600

# ============================================================================
# Message Queue Configuration
# ============================================================================
# NATS connection string
NATS_URL=nats://localhost:4222

# NATS configuration
NATS_MAX_RECONNECTS=10
NATS_RECONNECT_DELAY=2
NATS_PING_INTERVAL=120

# ============================================================================
# Authentication & Security
# ============================================================================
# JWT secret key (generate with: openssl rand -base64 32)
JWT_SECRET=your-secret-key-here-change-in-production

# JWT token expiration (in seconds)
JWT_EXPIRATION=86400

# API key for service-to-service authentication
API_KEY=your-api-key-here

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# ============================================================================
# LLM Provider Configuration
# ============================================================================
# OpenAI
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORG_ID=
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7

# Anthropic (Claude)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here
ANTHROPIC_MODEL=claude-3-opus-20240229
ANTHROPIC_MAX_TOKENS=4096

# Google (Gemini)
GOOGLE_API_KEY=your-google-api-key-here
GOOGLE_MODEL=gemini-pro
GOOGLE_PROJECT_ID=

# Azure OpenAI
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_DEPLOYMENT=
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# LLM Routing
LLM_DEFAULT_PROVIDER=openai
LLM_FALLBACK_PROVIDERS=anthropic,google
LLM_MAX_RETRIES=3
LLM_RETRY_DELAY=1000

# ============================================================================
# Embedding Configuration
# ============================================================================
EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536
EMBEDDING_BATCH_SIZE=100

# ============================================================================
# Vector Database Configuration
# ============================================================================
# Qdrant
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
QDRANT_COLLECTION=copilot_vectors

# Pinecone
PINECONE_API_KEY=
PINECONE_ENVIRONMENT=
PINECONE_INDEX=copilot-index

# Weaviate
WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=
WEAVIATE_CLASS=CopilotDocument

# Vector DB selection
VECTOR_DB=qdrant

# ============================================================================
# RAG Configuration
# ============================================================================
RAG_CHUNK_SIZE=512
RAG_CHUNK_OVERLAP=50
RAG_TOP_K=5
RAG_SIMILARITY_THRESHOLD=0.7
RAG_RERANK_ENABLED=true
RAG_RERANK_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2

# ============================================================================
# Memory Configuration
# ============================================================================
MEMORY_TYPE=redis
MEMORY_MAX_TOKENS=4000
MEMORY_SUMMARY_ENABLED=true
MEMORY_SUMMARY_THRESHOLD=3000

# ============================================================================
# Workflow Configuration
# ============================================================================
WORKFLOW_MAX_STEPS=50
WORKFLOW_TIMEOUT=300
WORKFLOW_RETRY_ENABLED=true
WORKFLOW_RETRY_MAX_ATTEMPTS=3

# ============================================================================
# Plugin Configuration
# ============================================================================
PLUGIN_DIR=./plugins
PLUGIN_TIMEOUT=30
PLUGIN_MAX_CONCURRENT=10

# ============================================================================
# Observability
# ============================================================================
# OpenTelemetry
ENABLE_OTEL=false
OTEL_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=copilot-server
OTEL_TRACES_SAMPLER=always_on
OTEL_LOGS_EXPORTER=otlp
OTEL_METRICS_EXPORTER=otlp

# Jaeger (if not using OTLP)
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831

# Prometheus
PROMETHEUS_PUSH_GATEWAY=

# ============================================================================
# Feature Flags
# ============================================================================
FEATURE_STREAMING_ENABLED=true
FEATURE_FUNCTION_CALLING_ENABLED=true
FEATURE_MULTI_MODAL_ENABLED=false
FEATURE_CODE_EXECUTION_ENABLED=false
FEATURE_WEB_SEARCH_ENABLED=true

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ============================================================================
# Storage Configuration
# ============================================================================
# File storage
STORAGE_TYPE=local
STORAGE_LOCAL_PATH=./storage
STORAGE_MAX_FILE_SIZE=10485760

# S3 (if using cloud storage)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
S3_BUCKET=copilot-storage

# ============================================================================
# External Services
# ============================================================================
# Web search API
SERPAPI_KEY=
GOOGLE_SEARCH_API_KEY=
GOOGLE_SEARCH_ENGINE_ID=

# Code execution sandbox
SANDBOX_ENABLED=false
SANDBOX_URL=http://localhost:8000
SANDBOX_TIMEOUT=30

# ============================================================================
# Development
# ============================================================================
CONFIG_PATH=config/default.toml
RUST_LOG=copilot_server=debug,copilot_core=debug
RUST_BACKTRACE=1
